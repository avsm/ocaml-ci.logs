=== opam depext -ivyj 2 ppx_deriving_morphism
[2016-12-23 21:15.01] Starting...
# Detecting depexts using flags: x86_64 linux alpine
# The following system packages are needed:
#  - m4
m4
# All required OS packages found.
# Now letting OPAM install the packages
The following actions will be performed:
  - install ppx_tools             4.02.3                        [required by ppx_deriving_morphism]
  - install cppo                  0.9.4                         [required by ppx_deriving_morphism]
  - install result                1.2                           [required by ppx_deriving]
  - install ppx_deriving          4.1                           [required by ppx_deriving_morphism]
  - install ppx_deriving_morphism 0.4   
===== 5 to install =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/5: [cppo.0.9.4: dl]
Processing  2/5: [cppo.0.9.4: dl] [ppx_deriving.4.1: dl]
Processing  3/5: [cppo.0.9.4: dl] [ppx_deriving.4.1: dl] [ppx_deriving_morphism.0.4: dl]
[cppo.0.9.4] downloaded from file:///home/opam/opam-repository/cache
Processing  3/5: [ppx_deriving.4.1: dl] [ppx_deriving_morphism.0.4: dl]
[ppx_deriving.4.1] downloaded from file:///home/opam/opam-repository/cache
Processing  3/5: [ppx_deriving_morphism.0.4: dl]
[ppx_deriving_morphism.0.4] downloaded from file:///home/opam/opam-repository/cache
Processing  3/5:
Processing  4/5: [ppx_tools.4.02.3: dl]
Processing  5/5: [ppx_tools.4.02.3: dl] [result.1.2: dl]
[ppx_tools.4.02.3] downloaded from file:///home/opam/opam-repository/cache
Processing  5/5: [result.1.2: dl]
[result.1.2] downloaded from file:///home/opam/opam-repository/cache
Processing  5/5:

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/10: [cppo: make]
Processing  2/10: [cppo: make] [ppx_tools: make all]
+ make  (CWD=/home/opam/.opam/default/.opam-switch/build/cppo.0.9.4)
- echo 'let cppo_version = "0.9.4"' > cppo_version.ml
- ocamlyacc cppo_parser.mly
- ocamllex cppo_lexer.mll
- 354 states, 13186 transitions, table size 54868 bytes
- 3462 additional bytes used for bindings
- ocamlopt -o cppo -dtypes unix.cmxa cppo_version.ml cppo_types.ml cppo_parser.mli cppo_parser.ml cppo_lexer.ml cppo_command.ml cppo_eval.ml cppo_main.ml
- cd ocamlbuild_plugin && ocamlbuild -use-ocamlfind ocamlbuild_cppo.cma ocamlbuild_cppo.cmxa ocamlbuild_cppo.a ocamlbuild_cppo.cmxs
- ocamlfind ocamldep -package ocamlbuild -modules ocamlbuild_cppo.mli > ocamlbuild_cppo.mli.depends
- ocamlfind ocamlc -c -package ocamlbuild -o ocamlbuild_cppo.cmi ocamlbuild_cppo.mli
- ocamlfind ocamldep -package ocamlbuild -modules ocamlbuild_cppo.ml > ocamlbuild_cppo.ml.depends
- ocamlfind ocamlc -c -package ocamlbuild -o ocamlbuild_cppo.cmo ocamlbuild_cppo.ml
- ocamlfind ocamlc -a -package ocamlbuild ocamlbuild_cppo.cmo -o ocamlbuild_cppo.cma
- ocamlfind ocamlopt -c -package ocamlbuild -o ocamlbuild_cppo.cmx ocamlbuild_cppo.ml
- ocamlfind ocamlopt -a -package ocamlbuild ocamlbuild_cppo.cmx -o ocamlbuild_cppo.cmxa
- ocamlfind ocamlopt -shared -package ocamlbuild ocamlbuild_cppo.cmx -o ocamlbuild_cppo.cmxs
- echo 'let cppo_version = "0.9.4"' > cppo_version.ml
- ocamlyacc cppo_parser.mly
- ocamllex cppo_lexer.mll
- 354 states, 13186 transitions, table size 54868 bytes
- 3462 additional bytes used for bindings
- ocamlopt -o cppo -dtypes unix.cmxa cppo_version.ml cppo_types.ml cppo_parser.mli cppo_parser.ml cppo_lexer.ml cppo_command.ml cppo_eval.ml cppo_main.ml
- cd ocamlbuild_plugin && ocamlbuild -use-ocamlfind ocamlbuild_cppo.cma ocamlbuild_cppo.cmxa ocamlbuild_cppo.a ocamlbuild_cppo.cmxs
- ocamlfind ocamldep -package ocamlbuild -modules ocamlbuild_cppo.mli > ocamlbuild_cppo.mli.depends
- ocamlfind ocamlc -c -package ocamlbuild -o ocamlbuild_cppo.cmi ocamlbuild_cppo.mli
- ocamlfind ocamldep -package ocamlbuild -modules ocamlbuild_cppo.ml > ocamlbuild_cppo.ml.depends
- ocamlfind ocamlc -c -package ocamlbuild -o ocamlbuild_cppo.cmo ocamlbuild_cppo.ml
- ocamlfind ocamlc -a -package ocamlbuild ocamlbuild_cppo.cmo -o ocamlbuild_cppo.cma
- ocamlfind ocamlopt -c -package ocamlbuild -o ocamlbuild_cppo.cmx ocamlbuild_cppo.ml
- ocamlfind ocamlopt -a -package ocamlbuild ocamlbuild_cppo.cmx -o ocamlbuild_cppo.cmxa
- ocamlfind ocamlopt -shared -package ocamlbuild ocamlbuild_cppo.cmx -o ocamlbuild_cppo.cmxs
-> compiled  cppo.0.9.4
Processing  2/10: [ppx_tools: make all]
Processing  3/10: [ppx_tools: make all] [result: make]
+ make  (CWD=/home/opam/.opam/default/.opam-switch/build/result.1.2)
- cp `ocaml which_result.ml` result.ml
- ocamlc -c result.ml
- ocamlc -a -o result.cma result.cmo
- ocamlopt -c result.ml
- ocamlopt -a -o result.cmxa result.cmx
- ocamlopt -shared -linkall -o result.cmxs result.cmxa || true
- ocaml gen_result_install.ml
- cp `ocaml which_result.ml` result.ml
- ocamlc -c result.ml
- ocamlc -a -o result.cma result.cmo
- ocamlopt -c result.ml
- ocamlopt -a -o result.cmxa result.cmx
- ocamlopt -shared -linkall -o result.cmxs result.cmxa || true
- ocaml gen_result_install.ml
-> compiled  result.1.2
Processing  3/10: [ppx_tools: make all]
Processing  4/10: [ppx_tools: make all] [cppo: make install-lib]
+ make "install-lib" (CWD=/home/opam/.opam/default/.opam-switch/build/cppo.0.9.4)
- ocamlfind install -patch-version 0.9.4 "cppo_ocamlbuild" \
- 	META ocamlbuild_plugin/_build/ocamlbuild_cppo.cmi ocamlbuild_plugin/_build/ocamlbuild_cppo.cma ocamlbuild_plugin/_build/ocamlbuild_cppo.cmxa ocamlbuild_plugin/_build/ocamlbuild_cppo.a ocamlbuild_plugin/_build/ocamlbuild_cppo.cmxs
- Installed /home/opam/.opam/default/lib/cppo_ocamlbuild/ocamlbuild_cppo.cmxs
- Installed /home/opam/.opam/default/lib/cppo_ocamlbuild/ocamlbuild_cppo.a
- Installed /home/opam/.opam/default/lib/cppo_ocamlbuild/ocamlbuild_cppo.cmxa
- Installed /home/opam/.opam/default/lib/cppo_ocamlbuild/ocamlbuild_cppo.cma
- Installed /home/opam/.opam/default/lib/cppo_ocamlbuild/ocamlbuild_cppo.cmi
- Installed /home/opam/.opam/default/lib/cppo_ocamlbuild/META
- ocamlfind install -patch-version 0.9.4 "cppo_ocamlbuild" \
- 	META ocamlbuild_plugin/_build/ocamlbuild_cppo.cmi ocamlbuild_plugin/_build/ocamlbuild_cppo.cma ocamlbuild_plugin/_build/ocamlbuild_cppo.cmxa ocamlbuild_plugin/_build/ocamlbuild_cppo.a ocamlbuild_plugin/_build/ocamlbuild_cppo.cmxs
- Installed /home/opam/.opam/default/lib/cppo_ocamlbuild/ocamlbuild_cppo.cmxs
- Installed /home/opam/.opam/default/lib/cppo_ocamlbuild/ocamlbuild_cppo.a
- Installed /home/opam/.opam/default/lib/cppo_ocamlbuild/ocamlbuild_cppo.cmxa
- Installed /home/opam/.opam/default/lib/cppo_ocamlbuild/ocamlbuild_cppo.cma
- Installed /home/opam/.opam/default/lib/cppo_ocamlbuild/ocamlbuild_cppo.cmi
- Installed /home/opam/.opam/default/lib/cppo_ocamlbuild/META
-> installed cppo.0.9.4
Processing  4/10: [ppx_tools: make all]
-> installed result.1.2
Processing  5/10: [ppx_tools: make all]
+ make "all" (CWD=/home/opam/.opam/default/.opam-switch/build/ppx_tools.4.02.3)
- ocamlc -bin-annot -w +A-4-17-44-45 -I +compiler-libs -safe-string -c ast_convenience.mli
- ocamlc -bin-annot -w +A-4-17-44-45 -I +compiler-libs -safe-string -c ast_convenience.ml
- ocamlc -bin-annot -w +A-4-17-44-45 -I +compiler-libs -safe-string -c ast_mapper_class.mli
- ocamlc -bin-annot -w +A-4-17-44-45 -I +compiler-libs -safe-string -c ast_mapper_class.ml
- ocamlc -bin-annot -a -o ppx_tools.cma ast_convenience.cmo ast_mapper_class.cmo
- ocamlc -bin-annot -w +A-4-17-44-45 -I +compiler-libs -safe-string -c genlifter.ml
- ocamlc -bin-annot -w +A-4-17-44-45 -I +compiler-libs -safe-string -o genlifter ocamlcommon.cma ppx_tools.cma genlifter.cmo
- ./genlifter -I +compiler-libs Parsetree.expression > ast_lifter.ml || rm -rf ast_lifter.ml
- ocamlc -bin-annot -w +A-4-17-44-45 -I +compiler-libs -safe-string -c ast_lifter.ml
- ocamlc -bin-annot -w +A-4-17-44-45 -I +compiler-libs -safe-string -c dumpast.ml
- ocamlc -bin-annot -w +A-4-17-44-45 -I +compiler-libs -safe-string -o dumpast ocamlcommon.cma ocamlbytecomp.cma ast_lifter.cmo dumpast.cmo
- ocamlc -bin-annot -w +A-4-17-44-45 -I +compiler-libs -safe-string -c ppx_metaquot.ml
- ocamlc -bin-annot -w +A-4-17-44-45 -I +compiler-libs -safe-string -o ppx_metaquot ocamlcommon.cma ppx_tools.cma ast_lifter.cmo ppx_metaquot.cmo
- ocamlc -bin-annot -w +A-4-17-44-45 -I +compiler-libs -safe-string -c rewriter.ml
- ocamlc -bin-annot -w +A-4-17-44-45 -I +compiler-libs -safe-string -o rewriter ocamlcommon.cma rewriter.cmo
- ocamlopt -w +A-4-17-44-45 -I +compiler-libs -safe-string -c ast_convenience.ml
- ocamlopt -w +A-4-17-44-45 -I +compiler-libs -safe-string -c ast_mapper_class.ml
- ocamlopt -a -o ppx_tools.cmxa ast_convenience.cmx ast_mapper_class.cmx
- ocamlopt -shared -o ppx_tools.cmxs -linkall ppx_tools.cmxa
-> compiled  ppx_tools.4.02.3
Processing  6/10: [ppx_tools: make install]
+ make "install" (CWD=/home/opam/.opam/default/.opam-switch/build/ppx_tools.4.02.3)
- ocamlfind install ppx_tools META genlifter dumpast ppx_metaquot rewriter ppx_tools.cma ppx_tools.cmxa ppx_tools.a ppx_tools.cmxs ast_convenience.mli ast_convenience.cmi ast_convenience.cmt ast_convenience.cmti ast_convenience.cmx ast_mapper_class.mli ast_mapper_class.cmi ast_mapper_class.cmt ast_mapper_class.cmti ast_mapper_class.cmx
- Installed /home/opam/.opam/default/lib/ppx_tools/ast_mapper_class.cmx
- Installed /home/opam/.opam/default/lib/ppx_tools/ast_mapper_class.cmti
- Installed /home/opam/.opam/default/lib/ppx_tools/ast_mapper_class.cmt
- Installed /home/opam/.opam/default/lib/ppx_tools/ast_mapper_class.cmi
- Installed /home/opam/.opam/default/lib/ppx_tools/ast_mapper_class.mli
- Installed /home/opam/.opam/default/lib/ppx_tools/ast_convenience.cmx
- Installed /home/opam/.opam/default/lib/ppx_tools/ast_convenience.cmti
- Installed /home/opam/.opam/default/lib/ppx_tools/ast_convenience.cmt
- Installed /home/opam/.opam/default/lib/ppx_tools/ast_convenience.cmi
- Installed /home/opam/.opam/default/lib/ppx_tools/ast_convenience.mli
- Installed /home/opam/.opam/default/lib/ppx_tools/ppx_tools.cmxs
- Installed /home/opam/.opam/default/lib/ppx_tools/ppx_tools.a
- Installed /home/opam/.opam/default/lib/ppx_tools/ppx_tools.cmxa
- Installed /home/opam/.opam/default/lib/ppx_tools/ppx_tools.cma
- Installed /home/opam/.opam/default/lib/ppx_tools/rewriter
- Installed /home/opam/.opam/default/lib/ppx_tools/ppx_metaquot
- Installed /home/opam/.opam/default/lib/ppx_tools/dumpast
- Installed /home/opam/.opam/default/lib/ppx_tools/genlifter
- Installed /home/opam/.opam/default/lib/ppx_tools/META
-> installed ppx_tools.4.02.3
Processing  7/10: [ppx_deriving: ocaml]
+ ocaml "pkg/build.ml" "native=true" "native-dynlink=true" (CWD=/home/opam/.opam/default/.opam-switch/build/ppx_deriving.4.1)
- ocamlfind ocamlopt -package unix -package ocamlbuild -linkpkg -package cppo_ocamlbuild myocamlbuild.ml /usr/lib/ocaml/ocamlbuild/ocamlbuild.cmx -o myocamlbuild
- File "_tags", line 1, characters 76-88:
- Warning: the tag "cppo_V_OCAML" is not used in any flag or dependency declaration, so it will have no effect; it may be a typo. Otherwise you can use `mark_tag_used` in your myocamlbuild.ml to disable this warning.
- cppo -o src/ppx_deriving_main.ml src/ppx_deriving_main.cppo.ml
- + cppo -o src/ppx_deriving_main.ml src/ppx_deriving_main.cppo.ml
- Error: File "src/ppx_deriving_main.cppo.ml", line 1, characters 22-23
- Error: Invalid token ,
- Command exited with code 1.
[ERROR] The compilation of ppx_deriving failed at "ocaml pkg/build.ml native=true native-dynlink=true".

#=== ERROR while compiling ppx_deriving.4.1 ===================================#
# command              ocaml pkg/build.ml native=true native-dynlink=true
# path                 /home/opam/.opam/default/.opam-switch/build/ppx_deriving.4.1
# exit-code            10
# env-file             /home/opam/.opam/log/ppx_deriving-1-000417.env
# output-file          /home/opam/.opam/log/ppx_deriving-1-000417.out
### output ###
# ocamlfind ocamlopt -package unix -package ocamlbuild -linkpkg -package cppo_ocamlbuild myocamlbuild.ml /usr/lib/ocaml/ocamlbuild/ocamlbuild.cmx -o myocamlbuild
# File "_tags", line 1, characters 76-88:
# Warning: the tag "cppo_V_OCAML" is not used in any flag or dependency declaration, so it will have no effect; it may be a typo. Otherwise you can use `mark_tag_used` in your myocamlbuild.ml to disable this warning.
# cppo -o src/ppx_deriving_main.ml src/ppx_deriving_main.cppo.ml
# + cppo -o src/ppx_deriving_main.ml src/ppx_deriving_main.cppo.ml
# Error: File "src/ppx_deriving_main.cppo.ml", line 1, characters 22-23
# Error: Invalid token ,
# Command exited with code 1.



=-=- Error report -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
+- The following actions were aborted
| - install ppx_deriving_morphism 0.4
+- 
+- The following actions failed
| - build ppx_deriving 4.1
+- 
+- The following changes have been performed
| - install cppo      0.9.4 
| - install ppx_tools 4.02.3
| - install result    1.2   
+- 
# Run eval `opam env` to update the current shell environment

The former state can be restored with:
    opam switch import "/home/opam/.opam/default/.opam-switch/backup/state-20161223214330.export"
'opam install --verbose --yes --jobs=2 ppx_deriving_morphism' failed.
[2016-12-23 21:43.41] Failed: Command "docker" "run" "--rm" "--tmpfs" "/tmp" "-v" "opam2-archive:/home/opam/opam-repository/cache" "sha256:9a13652d5412cc80af53c58c3a171f8e1510e5ad515cb4096140d80c6e823cd5" "opam" "depext" "-ivyj" "2" "ppx_deriving_morphism" exited with status 4
